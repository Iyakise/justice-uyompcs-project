'use strict';
//function that return path to files
function __mpcFile_path(){
    var loc = window.location; 
    var path = "";

    // Check if running on localhost or a live server
    if (loc.hostname === "localhost" || loc.hostname === "127.0.0.1") {
        // For local development (WAMP/XAMPP)
        path = loc.protocol + "//" + loc.hostname + "/justice/";
    } else {
        // For live server â€” automatically use the domain name
        path = loc.protocol + "//" + loc.hostname + "/";
    }

    return path;
}

function __mpc_dashboard() {
    var a, b, c, d, e,f;

        a = document.querySelector('.mpc-nav');
        b = document.querySelector('.content-display')
        a.addEventListener('mouseenter', function(){
            b.style.width = '80%';
        })
}

function __mpc_dashboardRtn() {
    var a, b, c, d, e,f;

        a = document.querySelector('.mpc-nav');
        b = document.querySelector('.content-display')
        a.addEventListener('mouseleave', function(){
            b.style.width = '92%';
        })
}

//checking maintenance
function __mpc_mainenance__() {
    var a, b, c, d, e, f, g, h, j, k, l, m, n, o, p, logo;

        a = 'OF';
        b = 'MAINTENANCE_MODE_OFF';
        //checking mpc maintenance
        if(a === 'ON' && b === 'MAINTENANCE_MODE_ON'){
            c = document.querySelectorAll('.mpc-m'); //getting all the body class

            //trying to create a new element
           // g = document.createElement('DIV');
           // g.className = 'mpc-body';

            d = document.createElement('DIV');
            d.className = 'mpc-maintenance';

            //url to load system logo
         //   g =  'http://localhost/mpc/asset/img/logo.jpg';
            g = __mpcFile_path() + 'asset/img/logo.jpg'; //file url

            e = document.createElement('DIV');
            e.className = 'update-logo';

            //create logo img
            logo = document.createElement('IMG');
            logo.className = 'mpc-upd-logo';
            logo.src = g;
            logo.srcset = g;
            logo.alt = 'GOOD-LIFE MPC LOGO';
            logo.title = 'GOOD-LIFE MPC LOGO';

            h = document.createElement('DIV'); //CREATING ELEMENT FOR UPDATE MSG
            h.className = 'card-body mpc-card-body';

            j = document.createElement('H1');
            j.textContent = 'JUSTICE UYO MPCS WEBSITE IN MAINTENANCE MODE!';
            j.className = 'text-center';

            k = document.createElement('P');
            k.textContent = 'We are running maintenance check on our website, and this might take up to five (5) minute or more, please try again after five minutes.';
            l = document.createElement('P');
            l.textContent = 'Maintenance and system update is importance, it help us fix bugs, system vulnerability, and to serves you better. We are very sorry for any inconveniences this might have cause you.';

            m = document.createElement('P');
            m.textContent = 'JUSTICE UYO MPCS';

            //creating maintenance done p
            n = document.createElement('P'); // maintenance done return to user
            n.className = 'mpc-maintenance-done';
            
            e.appendChild(logo); // insert child element of e variable

            h.appendChild(j) //first child element of h variable
            h.appendChild(k) //first child element of h variable
            h.appendChild(l) //second child element of h variable
            h.appendChild(m) //third child element of h variable
          //  h.appendChild(j) //first child element of h variable
            
            d.appendChild(e); //appending child element of e
            d.appendChild(h); //appending child element of d
            d.appendChild(n); //appending child element of d
            

            f = document.body;
            f.classList.add('mpc-update');
            f.appendChild(d);

            //LET LOOP OVER ALL TO HIDE
            for (let i = 0; i < c.length; i++) {
                c[i].style.display = 'none';
                c[i].style.visibility = 'hidden';
                
            }

            __mpc_m_finish();
        }

        
}

//function to call admin toggle darkmode
function __mpcToggle() {
    var a, b, c, d, e, f, g, i, j;
        a = document.querySelector('.toggler');
        c = document.body;
        d = document.querySelector('.mpc-main-content');
        e = document.querySelector('.mpc-nav');
        f = document.querySelector('.dsh-board-light-mode');
        

        a.addEventListener('click', function(){
            

            if(this.classList.contains('NormalMode')) {

                this.classList.remove('NormalMode');
                this.classList.add('darkMode');

                localStorage.removeItem("Mpc_admin_color");
                
                localStorage.setItem("Mpc_admin_color", "darkMode");

                //begin all darkMode class here
                c.classList.add('mpc_dark_mode');
                d.classList.add('mpc-darkMod-darkbg');

                e.classList.remove('mpc-nav');
                e.classList.add('mpc-sidebar-darkMode');

               // f
              //  f
              // for (let i = 0; i < f.length; i++) {
               // f.classList.remove('dsh-board-light-mode');
              //  f.classList.add('dsh-board-dark-mode');
                   // f.style.display = 'none';
           // }
                

            }else if(this.classList.contains('darkMode')) {
                this.classList.remove('darkMode');
                this.classList.add('NormalMode');

                
                //localStorage.setItem("Mpc_admin_color", "NormalMode");
                localStorage.removeItem("Mpc_admin_color");

                //remove all darkMode class here
                c.classList.remove('mpc_dark_mode');
                d.classList.remove('mpc-darkMod-darkbg');

                e.classList.add('mpc-nav');
                e.classList.remove('mpc-sidebar-darkMode');

               
                
            }

            __darkMode_switch_callback(); //callback function
           
            
        })
}
function __darkMode_switch_callback() {
    var a, b, c, d, e, f;
        a = localStorage.getItem('Mpc_admin_color');
        f = document.querySelectorAll('.dsh-board-light-mode');
        c = document.querySelector('.mpc-toggle-bg');

        if(a == 'null' || a == null) {
            b = document.querySelectorAll('.dsh-board-dark-mode');
            

            for (let i = 0; i < b.length; i++) {
                const element = b[i];

                element.classList.remove('dsh-board-dark-mode');
                element.classList.remove('mpc-db-one-dark');
                element.classList.add('dsh-board-light-mode');
                element.classList.add('mpc-db-one');
                element.classList.add('shadow');

                
            }
            

        }else if(a == 'darkMode'){
           
            for (let i = 0; i < f.length; i++) {
                const element = f[i];

                element.classList.remove('dsh-board-light-mode');
                element.classList.remove('shadow');
                element.classList.remove('mpc-db-one');
                element.classList.add('dsh-board-dark-mode');
                element.classList.add('mpc-db-one-dark');
                //element.classList.add('mpc-dark-bg-only');
        
            }

        }


     /*   if(c.classList.contains('mpc-light-bg-only') && a != 'darkMode'){
                
            c.classList.add('mpc-light-bg-only'); //this will only  toggle between light and dark background
            c.classList.remove('mpc-dark-bg-only'); //removing dark mode class name
        }else if(a != null || a != 'null' && a == 'darkMode'){
            c.classList.remove('mpc-light-bg-only'); //this will only  toggle between light and dark background
            c.classList.remove('shadow'); //this will only  toggle between light and dark background
            c.classList.add('mpc-dark-bg-only'); //removing dark mode class name
        }
        */
}
function __checkDarkMode__() {
    var a, b, c, d, e, f, g, h;

        a = localStorage.getItem('Mpc_admin_color');
        b = document.querySelector('.toggler');
        c = document.body;
        d = document.querySelector('.mpc-main-content');
        e = document.querySelector('.mpc-nav');
    //    f = document.querySelectorAll('.dsh-board-light-mode');
        

        
        if(a == 'null' || a == null){

              c.classList.remove('mpc_dark_mode');
         
         // alert(a);
        
        }else {
          

            b.classList.add(a); //document query
            c.classList.add('mpc_dark_mode');
            d.classList.add('mpc-darkMod-darkbg');
            e.classList.remove('mpc-nav');
            e.classList.add('mpc-sidebar-darkMode');

            
        }
        __darkMode_switch_callback(); //dark call back function
       
}

function __mpc_disconnected_error__() {
    var a, b, c, d, e, f, g, logo;
        a = document.createElement('DIV');
        a.className = 'mpc-Internet-error';

        b = document.createElement('DIV');
        b.className = 'mpc-brand';
        logo = document.createElement('I');
        logo.className = 'fas fa-wifi fa-4x';
        b.appendChild(logo); //apending logo to element b

        //anothe section
        c = document.createElement('DIV');
        c.className = 'mpc-err-msg-body';

        d = document.createElement('H5'); //CREATE H5 ELEMENT FOR MSG INTRO
        d.className = 'mpc-h5';
        d.textContent = 'INTERNET SIGNAL LOST';
        c.appendChild(d); //first child of c variable
        
        e = document.createElement('P');
        e.textContent = 'You are seeing this message because your internet connection is slow, or lost.';

        f = document.createElement('P');
        f.textContent = ' To avoid any Unexpected error while the system is processing data, we will log you out of the system.';

        c.appendChild(e); // second child of c
        c.appendChild(e); // third child of c

        a.appendChild(b);
        a.appendChild(c);
        
        return a;


}

function __mpc_clearOutErrorMsg(a, b) {
    var clearOut;
        setTimeout(function() {
            clearOut = document.querySelector('.' + a); //this hold infomation about where to clear out err msg
            clearOut.innerHTML = ''; //msg clear out after this time out;
        }, b)
        
}

//function to check once mpc admin is offline
function __mpcAdmincheckOffLineStatus() {
    var a, b, c, d, e, f, mpcContent, rtn;

        a = document.createElement('DIV');
        a.className = 'mpc-Internet-error';

        b = document.createElement('DIV');
        b.className = 'mpc-brand';
        logo = document.createElement('I');
        logo.className = 'fas fa-satellite-dish fa-5x';
        b.appendChild(logo); //apending logo to element b

        //anothe section
        c = document.createElement('DIV');
        c.className = 'mpc-err-msg-body';

        d = document.createElement('H5'); //CREATE H5 ELEMENT FOR MSG INTRO
        d.className = 'mpc-h5';
        d.textContent = 'INTERNET SIGNAL LOST';
        c.appendChild(d); //first child of c variable
        
        e = document.createElement('P');
        e.textContent = 'You are seeing this message because your internet connection is slow, or disconnected.';

        f = document.createElement('P');
        f.textContent = ' To avoid any Unexpected error while the system is processing data, we will log you out of the system.';

        c.appendChild(e); // second child of c
        c.appendChild(f); // third child of c

        a.appendChild(b);
        a.appendChild(c);

        j = navigator.onLine; //user navigation.online status

        rtn = document.querySelector('.mpc-admin-ds-notify');
        k = document.querySelector('.mpc-load-allData');
        mpcContent = document.querySelector('.mpc-content-by-content');

        if(j == false) {
            rtn.innerHTML = "Internet Connection is Lost, system will go Offline in a few seconds... ";

            __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 3000);

            //append err msg
            //setTimeout(function(){
            //    k.appendChild(a);

            //    mpcContent.innerHTML = ''; //once internet has been disconnected clearOut what user where doing
           // }, 3000);

           // __clearOutCheckOffline();
          // mpcContent.appendChild(__mpc_disconnected_error__());
            
        }else {
            rtn.innerHTML = 'Your Internet connection is Back!';
            __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 4000);
        }
        
}



//check to determine if document is ready
document.onreadystatechange = function() {
    if(document.readyState !== 'complete') {
        //here it means dom is not ready, it a good idea to show loading animation

        __mpcShowAnimation__(); //loading animation here
    }else {
        //it means dom is ready, let get rid of loading animation

        __mpcAnimaitonOff__(); //turning offf animation
    }
}
//function to check for loading
function __mpcShowAnimation__(){
    var a, b, c, d, e, f, g, h, i, j, k, l , m , n, o , p, q, r, s, t, u, v, w, x, body;

        a = document.querySelectorAll('.mpc-m'); //selecting only the selectables

        b = document.createElement('DIV'); //animation loading container
        b.className = 'mpc-loading-show';

        c = document.createElement('DIV'); //mpc-loading-sidebar
        c.className = 'mpc-loading-sidebar';
        b.appendChild(c); //child element of b

        d = document.createElement('DIV'); //mpc-loading-right
        d.className = 'mpc-loading-right';

        //creating child element of d variable
        e = document.createElement('DIV'); //load-right-icon
        e.className = 'load-right-icon';
        f = document.createElement('DIV'); //load-right-icon
        f.className = 'load-right-icon';
        g = document.createElement('DIV'); //load-right-icon
        g.className = 'load-right-icon';

        //appending child element of d
        d.appendChild(e) //appending first child of d
        d.appendChild(f) //appending second child of d
        d.appendChild(g) //appending third child of d
        b.appendChild(d); // returning another child of b variable element

        //creating animation main loading mpc-load-display
        h = document.createElement('DIV'); //mpc-load-display
        h.className = 'mpc-load-display';

        //h variable with classname mpc-load-display will have for child element
        i = document.createElement('DIV'); // mpc-load-display CHILD 1
        i.className = 'display-item1-container';
       
        //creating two i child element
        j = document.createElement('DIV'); // FIRST I CHILD ELEMENT
        j.className = 'load-display-items';
        k = document.createElement('DIV'); // second I CHILD ELEMENT
        k.className = 'load-display-items';
        //trying to append child element i variable
        i.appendChild(j); //apppending first child element of i
        i.appendChild(k); //apppending second child element of i

         //appending first child element of h
         h.appendChild(i) //successfully appending first h variable child element which is i variable, 
         //i variabble will have two children which will be grand children of h varable element;

        /// trying to create another child elemnt of h variable element
        l = document.createElement('DIV'); //create element display-item2-container
        l.className = 'display-item2-container'; //this element is a direct decendant of h variable element mpc-load-display

        //variable element will have two children inside of it
        m = document.createElement('DIV'); //FIRST CHILD ELEMNT OF l variable element
        m.className = 'load-display-items1';
        n = document.createElement('DIV'); //SECOND CHILD ELEMNT OF l variable element
        n.className = 'load-display-items2';
        //trying to return child of l variable element to it parent
        l.appendChild(m) // child one return
        l.appendChild(n) // child two return

        h.appendChild(l) //append l element to parent h

        //creating another child elemnt of h variable element
        o = document.createElement('DIV'); //creating parent element of two elemennt which is a child element of h variable
        o.className = 'load-circle'; // this element will have three (3) child element

        p = document.createElement('DIV');
        p.className = 'mpc-load-circle'; //first child of o variable element
        q = document.createElement('DIV');
        q.className = 'mpc-load-circle'; //third child of o variable element
        r = document.createElement('DIV');
        r.className = 'mpc-load-circle'; //third child of o variable element
        
        //trying to return child element to parent element o
        o.appendChild(p) //appending of first child
        o.appendChild(q) //appending of second child
        o.appendChild(r) //appending of third child
        h.appendChild(o); //return o variable element to parent h

        //creating the last element of h 
        s = document.createElement('DIV'); //LAST CHILD OF H VARIABLE ELEMENT
        s.className = 'mpc-load-last'; //this element will have to children

        t = document.createElement('DIV'); //CREATING CHILD ELEMENT S VARIABLE ELEMNT
        t.className = 'last-load-items';
        u = document.createElement('DIV'); //CREATING CHILD ELEMENT S VARIABLE ELEMNT
        u.className = 'last-load-items';

        s.appendChild(t) //child element of s 1
        s.appendChild(u) //child element of s 2

        h.appendChild(s) // THE END :)
        b.appendChild(h) // THE END :) MASTER


    //return all at once
    body = document.querySelector('.mpc-ani-container');
    body.classList.add('mpc-loading');
    body.appendChild(b);
    document.body.classList.add('mpc-loading-frame');

    for (let index = 0; index < a.length; index++) {
        a[index].style.visibility = 'hidden';
    }
         



}

//function to off animation
function __mpcAnimaitonOff__() {
    var a, b ,c ;

        a = document.querySelector('.mpc-ani-container'); //animation parent element
        b = document.querySelectorAll('.mpc-m');

       // a.remove() // remove animation out

       a.innerHTML = '';
        //let loop through and return back element
        for (let i = 0; i < b.length; i++) {
            b[i].style.visibility = 'visible';
            
        }
        document.body.classList.remove('mpc-loading-frame');
}

//creating mpc maintenance fini function
function __mpc_m_finish() {
    var mtnRtn, a, b, c, d, e, cnt, countdown, x, now, distance, days, hours, minutes, seconds;

        mtnRtn = document.querySelector('.mpc-maintenance-done'); //maintenance mode rtn

       //  countdown = new Date("feb 29, 2023 00:00:00").getTime();
    
}
function __mpcReset__(d,b, c='') {

    var a, x ;

        
        x = setTimeout(function(){
            a = document.querySelector(d); //element to truncate
            a.innerHTML = ''; //successfully truncated data here
            a.classList.remove(c);
        }, b)

       // clearTimeout(x);
}
//nigeria 
//that first save userS info step one
function addClientStepOne() {
    var a, b, c, d, e, f, g, h, i ,j, k ,i, m, n, o, p, q, r, s, t, url, data, w, xhr, pbirth, reli, z, jsonRtn, hide, show;

        //start
        a = document.querySelector('.usrId').innerText; //this one check for userId that current user upload id
        b = document.querySelector('.UploadAny').innerText; //this one check for
        s = document.querySelector('.stepOne').innerText; //this one check for
        t = document.querySelector('.stepTwo').innerText; //this one check for
        hide = document.querySelector('.user-stepOne');
        show = document.querySelector('.user-stepTwo');

        z = document.querySelector('.mpc-admin-ds-notify'); //this will return msg to user

        c = document.querySelector('.Ttle').value; //get title
        d = document.querySelector('.sex').value; //get sex
        e = document.querySelector('.dob').value; //get date of birth
        f = document.querySelector('.name').value; //get name
        g = document.querySelector('.cAddr').value; //get current address
        h = document.querySelector('.pAddr').value; //get permanent address
        i = document.querySelector('.PhoneNum').value; //get phone number
        j = document.querySelector('.lga').value; //get local governement area
        k = document.querySelector('.email').value; //get email
       // l 'computer';//= document.querySelector('.occupation').value; //get occupation
        m = document.querySelector('.bizAddr').value; //get business address
        n = document.querySelector('.church').value; //get church
        o = document.querySelector('.nextOfKin').value; //get nextOfkin
        p = document.querySelector('.RelationNextOfKin').value; //get relation with next of kin
        q = document.querySelector('.NextOfKinAddr').value; //get next of kin address
        r = document.querySelector('.NextOfKinPhone').value; //get next of kin phone
        pbirth = document.querySelector('.pobirth').value; //place of birth member, not next of kin
        reli = document.querySelector('.religion').value; //religion member, not next of kin

        if(pbirth == '' || reli == '' || c == '' || d == '' || e == '' || f == '' || g == '' || h == '' || i == '' || j == '' || k == '' || l == '' || m == '' || n == '' || o == '' || p == '' || q == '' || r == ''){
            z.classList.add('to-red-color');
            z.innerHTML = 'All Input field is required';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table

        }else if(c.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Title field contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(d.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/) != -1){
            z.classList.add('to-red-color');
            z.innerHTML = 'Client sex field contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(e.search(/[a-z!@#$)>%^:;=&*(}'"<?{]/i) != -1){
            z.classList.add('to-red-color');
            z.innerHTML = 'Date of birth contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(f.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Name field contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(g.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Contact address contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(h.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Permanent address contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(i.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Phone Number contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(j.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Permanent address contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(k.search(/[!#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Email contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(l.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Occupation contains an Invalid character';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(m.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Business address contains an Invalid character ' + m;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification table
        }else if(n.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Church name contains an invalid character ' + n;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(o.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid name for next of kin! ' + o;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(p.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid relation for next of kin! ' + p;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(q.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid address for next of kin! ' + q;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(r.search(/[!@$%^:;=&*()_}'"<>?{]/) != -1) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid address for next of kin! ' + r;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(i.length > 11) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid Phone, max phone number should not exceed 11 digit ' + i;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification
        }else if(i.length < 11){
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid Phone, max phone number should not exceed 11 digit ' + i;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification
        }else if(r.length > 11) {
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid next of kin phone number ' + r;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification
        }else if(r.length < 11){
            z.classList.add('to-red-color');
            z.innerHTML = 'Invalid next of kin phone number ' + r;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification
        }else if(i === r){
            z.classList.add('to-red-color');
            z.innerHTML = 'Member and Next of kin phone number Match! ' + '"Members phone"' + i +', Next of Kin Phone' + r;

            __mpcReset__('.mpc-admin-ds-notify', 5000, 'to-red-color'); //Clearout text inside notification
        }else if(f == o){
            z.classList.add('to-red-color');
            z.innerHTML = 'Member and next of kin names should not be the same';

            __mpcReset__('.mpc-admin-ds-notify', 6000, 'to-red-color'); //Clearout text inside notification
        }else {

            __mpcShowAnimation__(); //computer animation showUp
            //mpc ajax request here
            //first trying to covert data to json objects
            data = JSON.stringify({'Title' : c, 'Sex': d,
                                    'Dob': e, 'Name': f,
                                    'Caddr':g, 'Paddr': h,
                                    'Phone':i, 'Lga': j,
                                    'Email':k, 'Occup': l,
                                    'BusAddr':m, 'Church':n,
                                    'Nextkin':o, 'NkinRel':p,
                                    'NkinAddr' :q, 'NkinPhone':r,
                                    'Pbirth':pbirth, 'Reli':reli
                                });
            xhr = new XMLHttpRequest();
            url = __mpcFile_path() + 'functions/mpc-dataRtn.php?action=' + data;
            xhr.open(
                'POST',
                url,
                true
                );
            xhr.onreadystatechange = function(){
                if(this.status == 200 && this.readyState == 4){
                    
                  //  z.innerHTML = w;
                    
                   // if(w == 'STEP ONE DONE'){
                     //   window.location.replace(__mpcFile_path() + 'dashboard.php/?action=addClient&r=client&')
                  //  }

                  jsonRtn = JSON.parse(this.response);
                  console.log(this.response);
                  if(jsonRtn.stepOne == 'Mpc') {

                    __mpcAnimaitonOff__() // turn of mpc animation
                    z.innerHTML = 'Step complete for member: "' + jsonRtn.lastName + '" Please don\'t close this window..., if This step is omited account will not be activated!';
                    //a.innerHTML = jsonRtn.LastId;
                    b.innerHTML = 1;

                    window.location.replace(__mpcFile_path() + 'dashboard.php/?action=addClient&r=client&uid=' + jsonRtn.LastId + '&n=' + jsonRtn.lastName);


                    //s.style.background = 'mediumseagreen';
                    //hide.style.display = 'none';
                   // hide.style.visibility = 'hidden';
                    //show
                    //show.style.display = 'block';
                    //show.style.visibility = 'visible';
                    
                  }else {
                    __mpcAnimaitonOff__() // turn of mpc animation

                    z.innerHTML = this.response; //return response to admin
                  }
                }
            }
            xhr.send();
            
        }
}

//function create a session expire login input
function __mpcVerifyLogin() {
    var cnt, a, b, c, d, e, f, g, h, i, j ,k ,l ,m, n;

        cnt = document.createElement('DIV');
        cnt.className = 'form-container';
        cnt.setAttribute('style', 'margin-top:0;')
        
        //create input container
        a = document.createElement('DIV');
        a.className = 'verifyInput';
        g = document.createElement('H5');
        g.textContent = 'Your current login session expires, please login to verify!';

        b = document.createElement('DIV');
        b.className = 'live-time';

        c = document.createElement('INPUT'); //USERNAME INPUT
        c.className = 'user-uid mpc-input';
        c.type = 'text';
        c.placeholder = 'Username, Phone, Email';

        d = document.createElement('INPUT'); //USERNAME INPUT
        d.className = 'user-uidPass mpc-input';
        d.type = 'password';
        d.placeholder = 'Password';

        e = document.createElement('BUTTON');
        e.className = 'UidUser-verifyme';
        e.textContent = 'Verify Me';
        e.setAttribute('onclick', 'Mpc_verifyAdmin()');

        f = document.createElement('h6');
        f.className = 'rtn-msg text-center';

        //start appending child element
        a.appendChild(g);
        a.appendChild(c);
        a.appendChild(d);
        a.appendChild(e);
        a.appendChild(f);

        cnt.appendChild(a);

        return cnt; //returning all created html element to container varaible

        
}

//function to complete user data
function addClientStepTwo(){
    var a, b, c, d, e, f, g, h, i, j, k, l ,m, n, o, p, q, r, s, t, u, w, data, x, xhr, check;

        a = document.querySelector('.acctNo').value; //member account number
        b = document.querySelector('.BankName').value; //member account number
        c = document.querySelector('.ActtName').value; //member account number
        d = document.querySelector('.anyOtherCooperative').value; //member account number
        check = document.querySelector('.anyOtherCooperative'); //member account number
        e = document.querySelector('.cooperativeName').value; //member account number
        f = document.querySelector('.RefAddre').value; //member account number
        g = document.querySelector('.RefPhone').value; //member account number
        h = document.querySelector('.declare').innerText; //memberdeclaration
        m = document.querySelector('.usrId').innerText;

        RtnMsg = document.querySelector('.mpc-admin-ds-notify'); //Rtn message
        n = document.querySelector('.stepTwo'); //admin which step by color
        l = document.querySelector('.UploadAny'); //this shows which step admin currently is
      //  a = document.querySelector('.acctNo'); //member account number
        
        //check for valid data
        if(check.checked){
            //i varable is given the role of , any other coperative
            i = 'Yes';
            j = e;
        }else {
            i = 'No';
            j = 'N/A';
        }
        
        if(j == ''){
            j = 'Pending';
        }

        if(a == '' || b == '' || c == '' || d == '' || f == '' || g == '' || h == '') {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Input box with asterix is required at default ';

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(a.search(/[a-z!@#$)>%^:;=&*(}'"<?{]/i) != -1) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Account number has an invalid data! ' + a;

            __mpcReset__('.mpc-admin-ds-notify', 4000, 'to-red-color'); //Clearout text inside notification 
        }else if(b.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/i) != -1) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Member\'s bank name has an invalid data! ' + b;

            __mpcReset__('.mpc-admin-ds-notify', 4000, 'to-red-color'); //Clearout text inside notification 
        }else if(c.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/i) != -1){
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Member\'s account name has an invalid data! ' + c;

            __mpcReset__('.mpc-admin-ds-notify', 4000, 'to-red-color'); //Clearout text inside notification 
        }else if(f.search(/[!@#$)>%^:;=&*(}'"<?{]/) != -1) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Referee\'s name has an invalid data! ' + f;

            __mpcReset__('.mpc-admin-ds-notify', 4000, 'to-red-color'); //Clearout text inside notification 
        }else if(g.search(/[a-z!@#$)>%^:;=&*(}'"<?{]/i) != -1) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Referee\'s Phone has an invalid data! ' + g;

            __mpcReset__('.mpc-admin-ds-notify', 4000, 'to-red-color'); //Clearout text inside notification 
        }else if(g.length > 11) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Referee\'s Phone is more than 11 ' + g;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else if(g.length < 11) {
            RtnMsg.classList.add('to-red-color');
            RtnMsg.innerHTML = 'Referee\'s Phone is less than 11 ' + g;

            __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 
        }else {
__mpcShowAnimation__(); //computer animation showUp
            
            data = JSON.stringify({'AccNo': a, 'BankName': b, 'AccName': c, 'AnyOther': i, 'CoopName': j, 'GurantorName': f, 'GurantorPhone': g, 'Declaration':h, 'Crrntuser': m});
            
            k = __mpcFile_path() + 'functions/mpc-dataRtn.php?Perm=YakiseR&x=' + data;
            l = 'Dev=YAKISERaphael';
            //my computer is awesome
            xhr = new XMLHttpRequest(); //initializing new ajax request here
            xhr.open(
                'POST', 
                k, //THIS URL TO AJAX POST REQUEST
                true); // open ajax post request here
            xhr.onreadystatechange = function() {
                if(this.readyState == 4 && this.status == 200){

                    //RtnMsg.classList.add('to-red-color');
                    
                    if(this.response == 'SUCCESS') {
                      //  __mpcAnimaitonOff__() // turn of mpc animation
                      //  RtnMsg = 'Member information saved successful!';
                      //
                        window.location.replace(__mpcFile_path() + '/dashboard.php/?action=addClient&r=client&s=true')
                       // l.innerText = 2; //we are in step 2 already
                        //n.style.background = 'mediumseagreen';
                       // n.style.border = '2px solid #8bf500';
                        //n.title = 'Step two completed!';
                        //__mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification
                    }else {
                        __mpcAnimaitonOff__() // turn of mpc animation
                        RtnMsg.innerHTML = this.response; // return any server response to admin if not success is yakise

                        __mpcReset__('.mpc-admin-ds-notify', 5000, 'to-red-color'); //Clearout text inside notification
                    
                    }
                    

                }
            }
           // xhr.setRequestHeader('Content-Type': '')
            xhr.send();

            
        }
}

//CHECK FOR ADMIN LOGIN SESSIN
var rtn = setInterval(__checkMpcLoginSession, 3000);

function mpc_clear_timing(){
    clearInterval(rtn);

    console.log('YOUR LOGIN SESSION EXPIRES, PLEASE TRY LOGIN TO VERIFY YOUR ACTION!')
}

    //var checkonline = setInterval(__mpc_onStatus__, 4000);

function __clearOutCheckOffline() {
    clearInterval(checkonline);
}

function __mpc_onStatus__() {
    var a, b, c, d , e, f, g, h, cnt, rtn, online, msg;

    //check for online
    online = navigator.onLine;
    msg = document.querySelector('.mpc-admin-ds-notify'); //err msg container

    if(online == false) {

        msg.classList.add('to-red-color');
        msg.innerHTML = 'Your Internet signal is lost, system will disabled your dashboard to help protected against unexpected errors';
        __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification 

        setTimeout(function(){
            //run this code here after a specific amount of time
            cnt = document.querySelector('.offlineState');
            a = document.createElement('DIV');
            a.className = 'mpc-Login-Session-expire';

            b = document.createElement('DIV');
            b.className = 'mpc-offline';

            d = document.createElement('DIV');
            d.className = 'err-card-top';

            c = document.createElement('I');
            c.className = 'fas fa-satellite-dish fa-5x';

            d.appendChild(c); //document
            b.appendChild(d);

            e = document.createElement('H5'); //DOCUMENT CREATE ELEMENT
            e.textContent = 'INTERNET SIGNAL LOST!';
            d.appendChild(e);

            f = document.createElement('P');
            f.textContent = 'You are seeing this message because your internet connection is  disconnected.';

            g = document.createElement('P');
            g.textContent = 'To avoid any Unexpected error while the system is processing data, we will log you out of the system.';

            h = document.createElement('P');
            h.textContent = 'Your dashboard will re-enable once connection is back!.';
        
            d.appendChild(f); //appending child element of f
            d.appendChild(g); //appending child element of g
            d.appendChild(h); //appending child element of g

            a.appendChild(b); //appending last created child element

            cnt.appendChild(a);
        }, 3000)

       __clearOutCheckOffline();

    }
    
    if(online == true){
        //get and remove notification
        __clearOutCheckOffline();

    msg.innerHTML = 'Internet connection is Back!';
    __mpcReset__('.mpc-admin-ds-notify', 3000, 'to-red-color'); //Clearout text inside notification

        rtn = document.querySelector('.mpc-Login-Session-expire');
        rtn.remove();
    }

    

}

function __checkMpcLoginSession() {
    var a, b, c, d, e, f, g, h, url, xhr, rtn, cnt;

    
        url = __mpcFile_path() + 'functions/v.php?checkLoginCookie=Admlogin';
        xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.onreadystatechange = function() {
            if(this.status == 200 && this.readyState == 4) {

                h = JSON.parse(this.response); //server response
                if(h == 'true') {
                    

                    //from here now it means admin is login
                }else {
                    cnt = document.querySelector('.session-expire');
                    a = document.createElement('DIV');
                    a.className = 'mpc-Login-Session-expire';
/*
                    b = document.createElement('DIV');
                    b.classList = 'card-head mpc-cardHeader text-center';
                    c = document.createElement('I');
                    c.className = 'fa fa-bug fa-5x';
                    b.appendChild(c);
                    
                    d = document.createElement('DIV');
                    e = document.createElement('h5');
                    e.textContent = 'Your login session Expires, please login again to verify status';
                    

                    d.appendChild(e);
                    a.appendChild(b);
                    a.appendChild(d);
                    */
                    a.appendChild(__mpcVerifyLogin());

                    cnt.appendChild(a);
                    

                    mpc_clear_timing();
                    

                }
            }
            
        }
       xhr.send(); //send ajx request to server


}

//verify admin login session
function Mpc_verifyAdmin() {
    var a, b, c, d, e, f, g, xhr;

        a = document.querySelector('.user-uid').value; //
        b = document.querySelector('.user-uidPass').value; //
        c = document.querySelector('.rtn-msg');
        e = document.querySelector('.mpc-Login-Session-expire');


        f = __mpcFile_path() + 'functions/mpc-dataRtn.php';
        d = "PERMIT=GOODMPC&Usr=" + a +'&Pwdpass=' +b; //get login username password and send it to server for checking and confirmation

        //create start processing user login verify
        xhr = new XMLHttpRequest();
        xhr.open('POST', f, true);
        xhr.onreadystatechange = function() {
            if(this.readyState == 4 && this.status == 200) {
                if(this.response == 'LOGIN SUCCESS' /**CHECKING TO NO IF LOGIN VERIFICATION IS TRUE */) {
                    c.innerHTML = 'Your Login verification is successful, please wait, while we re-enable your dashboard!';
                    
                    //the success message will have to be on the screen for few seconds before we re-enable the screen
                    //6 seconds max
                  //  g = setTimeout('mpc_timingElaser', 6000);

                    mpc_timingElaser('.mpc-Login-Session-expire', 6000); //session expire enabble screen in

                    setInterval(__checkMpcLoginSession, 3000); ; //call this function again to start checking again incase admin session expires

                }else {
                    c.innerHTML = this.responseText;
                    
                }
            }
        }
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send(d); //sending data to server for processing
}

//checking for

//function to colapse disabled window
function mpc_timingElaser(a, b) {
    
    setTimeout(function(){
        document.querySelector(a).remove();
    }, b)
}

//function listen to change on admin select
function __mpc_adm_select() {
    var a, b, c, d, e, f, g, h,i, j ,k ,l, m, n, o, p, q, cnt, rtn, xhr;
         a = document.querySelector('.adm-select'); //admin select
        //b.appendChild(c);
        //cnt.appendChild(b);

        a.addEventListener('change', function(){
            if(this.value == 'profile') {
               // d = document.d;
                __mpcShowAnimation__(); //show animation here
               // c.innerHTML = __load_mpc_admin_action__('profile');
             //   cnt.appendChild(c);

                rtn = document.querySelector('.mpc-popup');
                
                cnt = document.createElement('DIV'); //POPUP BOX CONTAINER
                cnt.className = 'mpc-popup-anytime';
                //cnt.setAttribute('onclick', 'mpc_closepopUp');

                b = document.createElement('DIV');
                b.className = 'mpc-popup-bg';

                c = document.createElement('DIV');
                c.className = 'mpc-popup-inner';
                

                d = document.createElement('DIV');
                d.classList = 'close-mpc-popup';
                d.title = 'close this pop-up';
                d.innerHTML = '<i class="fa-times fa fa-2x"></i>';
                b.appendChild(d);

                e = document.createElement('DIV');
                e.className = 'mpc-img-profile ';

                f = document.createElement('DIV');
                f.className = 'mpc-img-path ';
                e.appendChild(f);

                g = document.createElement('DIV');
                g.className = 'drag-drop';
                g.title = "DRAG AND DROP IMAGE FILE HERE";
                e.appendChild(g);

                h = document.createElement('DIV');
                h.className = 'mpc-imgUpdate-Show'; //this hold information about the where uploaded image will show

                i = document.createElement('DIV');
                i.className = 'mpc-Input-container'; //this hold main upload input box
                f.appendChild(h);
                f.appendChild(i);

                j = document.createElement('IMG');
                j.className = 'mpc-upload-profile';
                j.src = __mpcFile_path() + 'asset/img/avartar1.png';
                j.srcset = __mpcFile_path() + 'asset/img/avartar1.png';
                j.alt = 'GOOD-LIFE AVARTAR';
                j.title = 'IMAGE WILL REPLACE THIS';

                l = document.createElement('I');
                l.className = 'fa fa-cloud-upload fa-5x';
                g.appendChild(l);
               // 
                m = document.createElement('LABEL');
                m.setAttribute('for', 'imge-upload');
                m.className = 'imge-upload-lable';
                m.textContent = "upload";
                

                h.appendChild(j); //image show up here

                k = document.createElement('INPUT');
                k.type = "file";
                k.className = 'upload-mpc-profile';
                k.name = 'upload-mpc-profile';
                k.setAttribute('accept', 'image/*');
                k.id = 'imge-upload';

                i.appendChild(k);
                i.appendChild(m);
              //  i.appendChild(m);
              o = document.createElement('SPAN');
              o.className = 'Upload-status';
              o.textContent = 'Profile upload status show here';
              b.appendChild(o);



                

                b.appendChild(c);
                b.appendChild(e);
                cnt.appendChild(b)
                rtn.appendChild(cnt);

                xhr = new XMLHttpRequest();
                xhr.open('GET', __mpcFile_path() + 'functions/v.php?q=profile', true);
                xhr.onreadystatechange = function(){
                    if(this.readyState == 4 && this.status == 200) {
                        __mpcAnimaitonOff__(); //off animation here
                        c.innerHTML = this.response;
                    }
                }
                xhr.send();

                mpc_popClose();
                __detectUpload();
                __mpcAdmin_dragleave__(); //drag and drop
                __mpcAdmin_drag__(); //drag enter for first time
                __mpcAdmin_drop__(); //drop element is the current position
                
            }else if(this.value == 'pwd') {
                alert('pwd password')
            }else if(this.value == 'Logout') {
                alert('logout')
            }
        })
}
//function to close all pop-up inside admin dashboard
function mpc_popClose() {
    var a, b, c, d;
        a = document.querySelector('.close-mpc-popup');
        b = document.querySelector('.mpc-popup-anytime');

        a.addEventListener('click', function(){
            
            //trying to remove this pop up element
            b.remove();
        })
}

// try to detect when admin select profile picture
function __detectUpload(){
    var a, b, c, data, d, e, formdata, rtn, label, f, xhr, g, txt, url;

        a = document.querySelector('.upload-mpc-profile');
        b = document.querySelector('.pByAjax');
       // id = document.querySelector('.userById').innerText;
        c = document.querySelector('.mpc-upload-profile');
        txt = document.querySelector('.Upload-status');
        label = document.querySelector('.imge-upload-lable');

        
        a.addEventListener('change', function(event){
            txt.textContent = 'Please wait... PROCESSING IMAGE';
            url =  __mpcFile_path() + 'functions/mpc-ajax-action.php';
            xhr = new XMLHttpRequest();
            data = this.files[0];
             formdata = new FormData();
            //try tying to disable image upload interface
            this.disabled = true;
            this.value = '';
            this.title = "SORRY I WAS TOLD TO DISABLED MY SELF AND GO TO SLEEP, AM SLEEPING, PLEASE COMEBACK LATER!";
            label.title = "SORRY I WAS TOLD TO DISABLED MY SELF AND GO TO SLEEP, AM SLEEPING, PLEASE COMEBACK LATER!";
            

                //appending data to form
                formdata.append('uploadPic', data);
            xhr.open('POST', url, true);
            
            xhr.onreadystatechange = function(){
                if(this.readyState == 4 && this.status == 200){
                    
                   rtn = this.responseText; //any response, what server is saying;
                   if(rtn == 'This file is not allowed' || rtn == 'File size too big' || rtn == 'Unexpected error, please try again'){
                        txt.textContent = 'We ran into some unusual circumstance while processing image, our server responded with =>"' + rtn +'", please try again!';
                   }else {
                    
                        txt.textContent = 'Upload Complete!'; //image upload sucessfully no error then let display that to admin;

                        //display the new image to admin using this formate
                        c.src = __mpcFile_path() + 'asset/img/' + rtn;
                        c.srcset = __mpcFile_path() + 'asset/img/' + rtn;
                        c.title = 'Newly Uploaded Image';
                   }
                }
            }
           // xhr.setRequestHeader('Content-type', 'multipart/form-data');
            xhr.send(formdata);
            

        })
}

//drag and drop start
function __mpcAdmin_dragleave__(){
    var a, b, c, d, e, f, g;

        a  = document.querySelector('.drag-drop');
        b  = document.querySelector('.Upload-status');
        a.addEventListener('dragleave', function(event){
            event.preventDefault();
            this.style.border = '5px dotted red';
            this.style.color = 'red';
            this.style.cursor = 'no-drop';

            b.textContent = 'You are not allowed to drop file outside dropBox...';
            document.body.style.cursor = 'no-drop';
        })

       // b.addEventListener('drop', function(){
      //      alert('yess you drop it');
      //  })
}

//drag and drop start
function __mpcAdmin_drag__(){
    var a, b, c;
    a  = document.querySelector('.drag-drop');
    b  = document.querySelector('.Upload-status');
    a.addEventListener('dragenter', function(event){
        event.defaultPrevented();
        this.style.border = '5px dotted seagreen';
        this.style.color = 'seagreen';
        this.style.cursor = 'grabbing';


        b.textContent = 'Okay..., this area is dropable';
        document.body.style.cursor = 'grabbing';
    })
}

//drag and drop start
function __mpcAdmin_drop__(){
    var a, b, c;
    a  = document.querySelector('.drag-drop');
    b  = document.querySelector('.Upload-status');
    a.addEventListener('drop', function(event){
        event.defaultPrevented();
        this.style.border = '5px dotted seagreen';
        this.style.color = 'seagreen';
        this.style.cursor = 'grabbing';


        b.textContent = 'Okay..., this area is dropable';
        document.style.cursor = 'progress';
    })
}

//admin create loan
function __mpc_create_loan() {
    var a, b, c, d, e, f, g, rtn, xhr;
        rtn = document.querySelector('.load-loan-user-rtn');

        xhr = new XMLHttpRequest();
        xhr.open('POST', __mpcFile_path() + '/functions/mpc-ajax-action.php', true);

        xhr.onreadystatechange = function(){
            if(this.readyState == 4 && this.status == 200){
                rtn.innerHTML = this.responseText;
                console.log(this.status);
            }
        }
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.send('PERM=LoadLoanUsers');

}

function __AppendMpcLoanUser__() {
    var a, b, c, d, e, f, nme, brnch, grp;
        a = document.querySelectorAll('.creatforThisMember');
        nme = document.querySelector('.lusrname');
        brnch = document.querySelector('.branch');
       // grp = document.querySelector('.group');
        
        for (let x = 0; x < a.length; x++) {
            a[x].addEventListener('click', function(){
                b = this.getAttribute('mpc-borrower'); //borrowers name
                c = this.getAttribute('borrower-phone'); //borrowers phone
                d = this.getAttribute('borrower-branch'); //borrowers branch
                e = this.getAttribute('borrower-id'); //borrowers id borrower-group
              //  f = this.getAttribute('borrower-group'); //borrowers borrower-group

                
                nme.value = b;
                brnch.value = d;
               // grp.value = f;

                nme.setAttribute('mpc-b-phone', c);
                nme.setAttribute('mpc-b-id', e);
               // nme.setAttribute('mpc-b-phone', c);
               
                
            })
            
        }
}

//admin search for loan client
function __mpcAdmSearchLoanCli__(){
    var a, b, c, d, param, xhr;

        a = document.querySelector('.searchClient');
        b = document.querySelector('.Queryparam');
        c = document.querySelector('.mpc-admin-ds-notify');
        d = document.querySelector('.Rtn-data-4rmQuery');

        
        a.addEventListener('input', () => {
            if(b.value == 'Phone' && a.value.search(/[a-z!@#$)>%^:;=&*(}'"<?{]/i) != -1) {
                c.classList.add('to-red-color');
                c.innerHTML = 'You choose phone number as your search parameter, only numbers from 0-9 allowed, or use default parameter!';
                __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 3000);
                a.style.border = '1px solid red';

            }else if(b.value == 'Reg_no' && a.value.search(/[a-z!@#$)>%^:;=&*(}'"<?{]/i) != -1){
                c.classList.add('to-red-color');
                c.innerHTML = 'please use a valid registration number, or use default parameter';
                __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 3000);
                a.style.border = '1px solid red';
            }else if(b.value == 'Email' && a.value.search(/[!#$)>%^:;=&*(}'"<?{]/i) != -1){
                c.classList.add('to-red-color');
                c.innerHTML = 'Please used a valid members email address, or use default parameter';
                a.style.border = '1px solid red';
                __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 3000);
            }else if(b.value == '' && a.value.search(/[0-9!@#$)>%^:;=&*(}'"<?{]/i) != -1){
                c.classList.add('to-red-color');
                c.innerHTML = 'Please used a valid members Name, first or last letter of their names then we will take it from there!';
                a.style.border = '1px solid red';
                __mpc_clearOutErrorMsg('mpc-admin-ds-notify', 3000);
            }else {
                //after all the checkings
                //there's always light at the end of the tunnel
                c.classList.remove('to-red-color');
                c.innerHTML = '';
                a.style.border = 'none';

                if(b.value == ''){
                    param = 'name';
                }else if(b.value == 'Phone'){
                    param = 'phone';
                }else if(b.value == 'Reg_no'){
                    param = 'registration_number';
                }else if(b.value == 'Email'){
                    param = 'email';
                }

                //trying to create Ajax request
                xhr = new XMLHttpRequest();
                xhr.open('GET', __mpcFile_path() + 'functions/mpc-ajax-action.php?qparam=MpcMrAkpasam&dev=IyakiseR&Q=' + a.value +'&Param=' + param, true);
                xhr.onreadystatechange = function(){
                    if(this.readyState == 4 && this.status == 200){
                        __mpcAnimaitonOff__(); //TURN OFF ANIMATION
                        d.innerHTML = this.response;
                        console.log('Admin query to get client data on '+ new Date().getTime() + ' and return status =>' + this.status);
                        __AppendMpcLoanUser__();
                    }
                }
                xhr.send();
                
                
            }
            
        })
}


window.onload = function(){
    
   // __mpc_dashboard();

    //return admin dashboard to 100%
    
   // __mpc_dashboardRtn();

   __mpc_mainenance__();

   __mpcToggle(); //toggle dark mode
   __checkDarkMode__(); //check whern admin is using darkMode and Normal mode
  // __mpcAdmincheckOffLineStatus(); //check to know if admin is disconnected

  __mpc_adm_select(); //admin selection change
  

  //__mpc_create_loan(); // loan all user so that admin can create loan request 
  __mpcAdmSearchLoanCli__();
  __AppendMpcLoanUser__();

    



}