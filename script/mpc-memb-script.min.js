
$(document).ready(function(){

            $('.owl-carousel').owlCarousel({
            items:1,
            lazyLoad:true,
            loop:true,
            hoverPause:true,
            margin:2,
            autoplay:true,
            autoplayTimeout: 10000,
            dots:false,
            
            });
            
            
})



//checking maintenance
function __mpc_mainenance__() {
    var a, b, c, d, e, f, g, h, j, k, l, m, n, o, p, logo;

        a = 'OFF';
        b = 'MAINTENANCE_MODE_OF';
        //checking mpc maintenance
        if(a === 'ON' && b === 'MAINTENANCE_MODE_ON'){
            c = document.querySelectorAll('.mpc-m'); //getting all the body class

            //trying to create a new element
           // g = document.createElement('DIV');
           // g.className = 'mpc-body';

            d = document.createElement('DIV');
            d.className = 'mpc-maintenance';

            //url to load system logo
         //   g =  'http://localhost/mpc/asset/img/logo.jpg';
            g = __mpc_uri__() + 'asset/img/logo.jpg'; //file url

            e = document.createElement('DIV');
            e.className = 'update-logo';

            //create logo img
            logo = document.createElement('IMG');
            logo.className = 'mpc-upd-logo';
            logo.src = g;
            logo.srcset = g;
            logo.alt = 'GOOD-LIFE MPC LOGO';
            logo.title = 'GOOD-LIFE MPC LOGO';

            h = document.createElement('DIV'); //CREATING ELEMENT FOR UPDATE MSG
            h.className = 'card-body mpc-card-body';

            j = document.createElement('H1');
            j.textContent = 'GOOD-LIFE MPC WEBSITE IN MAINTENANCE MODE!';
            j.className = 'text-center';

            k = document.createElement('P');
            k.textContent = 'We are running maintenance check on our website, and this might take up to five (5) minute or more, please try again after five minutes.';
            l = document.createElement('P');
            l.textContent = 'Maintenance and system update is importance, it help us fix bugs, system vulnerability, and to serves you better. We are very sorry for any inconveniences this might have cause you.';

            m = document.createElement('P');
            m.textContent = 'GOOD-LIFE MPC UYO';

            //creating maintenance done p
            n = document.createElement('P'); // maintenance done return to user
            n.className = 'mpc-maintenance-done';
            
            e.appendChild(logo); // insert child element of e variable

            h.appendChild(j) //first child element of h variable
            h.appendChild(k) //first child element of h variable
            h.appendChild(l) //second child element of h variable
            h.appendChild(m) //third child element of h variable
          //  h.appendChild(j) //first child element of h variable
            
            d.appendChild(e); //appending child element of e
            d.appendChild(h); //appending child element of d
            d.appendChild(n); //appending child element of d
            

            f = document.body;
            f.classList.add('mpc-update');
            f.appendChild(d);

            //LET LOOP OVER ALL TO HIDE
            for (let i = 0; i < c.length; i++) {
                c[i].style.display = 'none';
                c[i].style.visibility = 'hidden';
                
            }

           // __mpc_m_finish();
        }
    }

//mpc-membersLogin-butt
function mpc_memberslogin() {
    var usrname, pwd, butt, txt, xhr, url, data;

    //start butt
    butt = document.querySelector('.mpc-membersLogin-butt');
    usrname = document.querySelector('.mpc-usr');
    pwd = document.querySelector('.mpc-pwd');
    txt = document.querySelector('.mpc-txt');

  //  butt.addEventListener('click', ()=> {
        butt.disabled = true;

        //try to validate input
        if(usrname.value === '') {
            txt.innerHTML = 'Username is required...';
            txt.classList.add('err-msg');
            usrname.style.borderBottom = '2px solid #ff0000';
            butt.disabled = false;

        }else if(pwd.value === ''){
            txt.classList.add('err-msg');
            txt.innerHTML = 'Password is required...';
            pwd.style.borderBottom = '2px solid #ff0000';
            butt.disabled = false;
        }else{
            txt.classList.remove('err-msg');
            txt.classList.add('suc-msg');
            txt.innerHTML = 'PROCESSING...';
            butt.textContent = 'please wait';
           // butt.disabled = true; //computer suc-msg
            butt.title = 'DISABLED, DON\'T TRY AGAIN...';
            usrname.style.borderBottom = '2px solid #ffffff';
            pwd.style.borderBottom = '2px solid #ffffff';

            data = "PERM=MPC-members&usr=" +usrname.value +'&pwd=' +pwd.value;

            url = __mpc_uri__();
            xhr = new XMLHttpRequest();
            xhr.open('POST', url + 'functions/mpc-memp.php', true);
            xhr.onreadystatechange = function() {
                if(this.readyState == 4 && this.status == 200){
                    if(this.response == 'success'){
                        txt.innerHTML = 'Login success, redirecting... please wait.';

                        setTimeout(function() {
                       
                            window.location.replace(__mpc_uri__() + 'dashboard.php/?action=dashboard');

                        }, 3000)
                    }else {
                        txt.innerHTML = this.response;
                        txt.classList.remove('suc-msg');
                        txt.classList.add('err-msg'); //change from green text color to red dangerrrrrrrrrr
                        console.warn(this.response + ' rtnCode =>' + this.status);
                        butt.disabled = false;
                        butt.title = '';
                        butt.textContent = 'Login';
                    }
                }
            }
            xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr.send(data);

        }   
        



   // })
}

//mpc register butt
function mpcmembersLoginbutt() {
    var inp1, inp2, inp3, inp4, inp5, xhr, txt, butt, url, data;
    //create reg butt
    butt = document.querySelector('.mpc-membersLogin-butt');
    inp1 = document.querySelector('.name');
    inp2 = document.querySelector('.phone');
    inp5 = document.querySelector('.email');
    inp3 = document.querySelector('.pwd');
    inp4 = document.querySelector('.cpwd');
    txt = document.querySelector('.mpc-txt');
   // butt = document.querySelector('.mpc-membersLogin-butt');

   url = __mpc_uri__();
   data = "PERM=mpcMemReg@Online&name=" + inp1.value + '&phone=' + inp2.value + '&email=' + inp5.value + '&pwd=' + inp3.value;

    if(inp1.value == '' || inp2.value == '' || inp3.value == '' || inp5.value == ''){
        txt.classList.add('err-msg');
        txt.innerHTML = 'All input required';
        inp1.style.borderBottom = '2px solid #ff0000';
        inp2.style.borderBottom = '2px solid #ff0000';
        inp3.style.borderBottom = '2px solid #ff0000';
        inp4.style.borderBottom = '2px solid #ff0000';
        inp5.style.borderBottom = '2px solid #ff0000';

    }else if(inp3.value !== inp4.value){
        txt.classList.add('err-msg');
        txt.innerHTML = 'Password not Match!';
        inp3.style.borderBottom = '2px solid #ff0000';

    }else if(inp1.value.search(/[0-9!+@#$(%^&*)}{:"'?><._]/i) != -1){
        txt.classList.add('err-msg');
        txt.innerHTML = 'Invalid character in name field!';
        inp1.style.borderBottom = '2px solid #ff0000';

    }else if(inp2.value.search(/[a-z!+@#$(%^&*)}{:"'?><._]/i) != -1){
        txt.classList.add('err-msg');
        txt.innerHTML = 'Invalid phone number!';
        inp2.style.borderBottom = '2px solid #ff0000';
    }else {
        butt.disabled = true;
        txt.innerHTML = 'PROCESSING... please wait.';
        txt.classList.add('suc-msg');
        xhr = new XMLHttpRequest();
        xhr.open('POST', url + 'functions/mpc-memp.php', true);
        xhr.onreadystatechange = function(){
            if(this.responseText == 'Reg successful'){
                txt.innerHTML = 'Registration successful. please wait...';

                setTimeout(function() {
                    window.location.replace(url + 'login');
                }, 3000)

            }else {
                txt.innerHTML = this.response;
                butt.disabled = false;
            }

           // alert
        }
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.send(data);

    }
}

window.onload = function() {
    __mpc_mainenance__();
   // __mpc_login__();
}