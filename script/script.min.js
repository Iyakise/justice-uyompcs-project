$(document).ready(function(){

    $('.owl-carousel').owlCarousel({
    items:1,
    lazyLoad:true,
    loop:true,
    autoplayhoverPause:true,
    margin:2,
    autoplay:true,
    autoplayTimeout:4000,
    dots:false,
    
    });


})
//function that return path to files
function __mpcFile_path() {
    var loc = window.location; 
    var path = "";

    // Check if running on localhost or a live server
    if (loc.hostname === "localhost" || loc.hostname === "127.0.0.1") {
        // For local development (WAMP/XAMPP)
        path = loc.protocol + "//" + loc.hostname + "/justice/";
    } else {
        // For live server â€” automatically use the domain name
        path = loc.protocol + "//" + loc.hostname + "/";
    }

    return path;
}


function __mpc_time(){
    var a, b, d, e, f, g, h, i, j, k, l, m, dte, rtn;

        //trying to create a date object
        dte = new Date();
        rtn = document.querySelector('.mpc-time');

        //trying to get all the date object form js date
        a = dte.getFullYear(); //year
        b = dte.getMonth(); //month
        c = dte.getDate(); //date
        d = dte.getHours(); //hour
        e = dte.getMinutes(); //minute
        f = dte.getSeconds(); //seconds

        switch (b) {
            case 1:
                g = 'Feb.';
                break;
            
            case 2:
                g = 'March.';
                break;
            
            case 3:
                g = 'Apr.';
                break;

            case 4:
                g = 'May.';
                break;

            case 5:
                g = 'Jun.';
            break;

            case 6:
                g = 'Jul.';
            break;

            case 7:
                g = 'Aug.';
            break;

            case 8:
                g = 'Sep.';
            break;

            case 9:
                g = 'Oct.';
            break;

            case 10:
                g = 'Nov.';
            break;

            case 11:
                g = 'Dec.';
            break;
        
            default:
                g = 'Jan.'
                break;
        }

        if(d > 12) {
            h = 'PM';
        }else {
            h = 'AM';
        }

       // setInterval(function(){
        //    __mpc_time();

            rtn.innerHTML = c + ' ' + g + ' ' + a + ', ' + d + ':' + e + ':'  + f + ' ' + h;
          //  rtn.style.transition = 'color 1s linear';

       // }, 1000)


}

//check to determine if document is ready
document.onreadystatechange = function() {
    if(document.readyState !== 'complete') {
        //here it means dom is not ready, it a good idea to show loading animation

        __mpcShowAnimation__(); //loading animation here
    }else {
        //it means dom is ready, let get rid of loading animation

        __mpcAnimaitonOff__(); //turning offf animation
    }
}
//function to check for loading
function __mpcShowAnimation__(){
    var a, b, c, d, e, f, g, h, i, j, k, l , m , n, o , p, q, r, s, t, u, v, w, x, body;

        a = document.querySelectorAll('.mpc-m'); //selecting only the selectables

        b = document.createElement('DIV'); //animation loading container
        b.className = 'mpc-ani-rgter';

        c = document.createElement('DIV'); //mpc-loading-sidebar
        c.className = 'loading-logo-container';
        

        d = document.createElement('DIV'); //mpc-loading-right
        d.className = 'loading-logo';

        

        //creating child element of d variable
        e = document.createElement('DIV'); //load-right-icon
        e.className = 'load-item-contain';

        f = document.createElement('DIV'); //load-right-icon
        f.className = 'loading-inp-container';

        g = document.createElement('DIV'); //load-right-icon
        g.className = 'load-inputFrame';
        h = document.createElement('DIV'); //load-right-icon
        h.className = 'load-inputFrame';
        i = document.createElement('DIV'); //load-right-icon
        i.className = 'load-inputFrame';
        j = document.createElement('DIV'); //load-right-icon
        j.className = 'load-inputFrame';

        k = document.createElement('DIV'); //loading button frame
        k.className = 'load-butt-frame';

        c.appendChild(d); //child element of b
        b.appendChild(c); //child element of b

        e.appendChild(f);

        f.appendChild(g);
        f.appendChild(h);
        f.appendChild(i);
        f.appendChild(j);

        
        l = document.createElement('H6');
        l.className = 'loading-load';
        l.textContent = 'LOADING...';
        k.appendChild(l);
        f.appendChild(k);

        m = document.createElement('DIV');
        m.className = 'loading-mpc-time';
        n = document.createElement('DIV');
        n.className = 'tme-loader';
        
        m.appendChild(n);
        e.appendChild(m);
        b.appendChild(e);



    //return all at once
    o = document.querySelector('.icon-load'); //load and append
    body = document.body;
    body.classList.remove('mpc-body');
    body.classList.add('mpc-r-loading');
    o.appendChild(b);

    v = document.querySelectorAll('.mpc-m');
  //  body.appendChild(b);

    for (let index = 0; index < v.length; index++) {
        v[index].style.visibility = 'hidden';
        v[index].style.display = 'none';
        
    }
         



}

/*
//maintenance mode
//checking maintenance
function __mpc_mainenance__() {
    var a, b, c, d, e, f, g, h, j, k, l, m, n, o, p, logo;

        a = 'ON';
        b = 'MAINTENANCE_MODE_ON';
        //checking mpc maintenance
        if(a == 'ON' && b == 'MAINTENANCE_MODE_ON'){
            c = document.querySelectorAll('.mpc-m'); //getting all the body class

            //trying to create a new element
           // g = document.createElement('DIV');
           // g.className = 'mpc-body';

            d = document.createElement('DIV');
            d.className = 'mpc-maintenance';

            //url to load system logo
         //   g =  'http://localhost/mpc/asset/img/logo.jpg';
            g = __mpcFile_path() + 'asset/img/logo.jpg'; //file url

            e = document.createElement('DIV');
            e.className = 'update-logo';

            //create logo img
            logo = document.createElement('IMG');
            logo.className = 'mpc-upd-logo';
            logo.src = g;
            logo.srcset = g;
            logo.alt = 'GOOD-LIFE MPC LOGO';
            logo.title = 'GOOD-LIFE MPC LOGO';

            h = document.createElement('DIV'); //CREATING ELEMENT FOR UPDATE MSG
            h.className = 'card-body mpc-card-body';

            j = document.createElement('H1');
            j.textContent = 'GOOD-LIFE MPC WEBSITE IN MAINTENANCE MODE!';
            j.className = 'text-center';

            k = document.createElement('P');
            k.textContent = 'We are running maintenance check on our website, and this might take up to five (5) minute or more, please try again after five minutes.';
            l = document.createElement('P');
            l.textContent = 'Maintenance and system update is importance, it help us fix bugs, system vulnerability, and to serves you better. We are very sorry for any inconveniences this might have cause you.';

            m = document.createElement('P');
            m.textContent = 'GOOD-LIFE MPC UYO';

            //creating maintenance done p
            n = document.createElement('P'); // maintenance done return to user
            n.className = 'mpc-maintenance-done';
            
            e.appendChild(logo); // insert child element of e variable

            h.appendChild(j) //first child element of h variable
            h.appendChild(k) //first child element of h variable
            h.appendChild(l) //second child element of h variable
            h.appendChild(m) //third child element of h variable
          //  h.appendChild(j) //first child element of h variable
            
            d.appendChild(e); //appending child element of e
            d.appendChild(h); //appending child element of d
            d.appendChild(n); //appending child element of d
            

            f = document.body;
            f.classList.add('mpc-update');
            f.appendChild(d);

            //LET LOOP OVER ALL TO HIDE
            for (let i = 0; i < c.length; i++) {
                c[i].style.display = 'none';
                c[i].style.visibility = 'hidden';
                
            }

            __mpc_m_finish();
        }

        
}
*/
//function to off animation
function __mpcAnimaitonOff__() {
    var a, b ,c ;

        a = document.querySelector('.icon-load'); //animation parent element
        b = document.querySelectorAll('.mpc-m');

        a.innerHTML = ''; // remove animation out
        document.body.classList.remove('mpc-r-loading');
        document.body.classList.add('mpc-body');
        //let loop through and return back element
        for (let i = 0; i < b.length; i++) {
            b[i].style.visibility = 'visible';
            b[i].style.display = 'block';
            
        }
}


//checking maintenance
function __mpc_mainenance__() {
    var a, b, c, d, e, f, g, h, j, k, l, m, n, o, p, logo;

        a = 'OF';
        b = 'MAINTENANCE_MODE_OF';
        //checking mpc maintenance
        if(a == 'ON' && b == 'MAINTENANCE_MODE_ON'){
            c = document.querySelectorAll('.mpc-m'); //getting all the body class

            //trying to create a new element
           // g = document.createElement('DIV');
           // g.className = 'mpc-body';

            d = document.createElement('DIV');
            d.className = 'mpc-maintenance';

            //url to load system logo
            g =  __mpcFile_path() +'asset/img/logo.jpg';

            e = document.createElement('DIV');
            e.className = 'update-logo';

            //create logo img
            logo = document.createElement('IMG');
            logo.className = 'mpc-upd-logo';
            logo.src = g;
            logo.srcset = g;
            logo.alt = 'GOOD-LIFE MPC LOGO';
            logo.title = 'GOOD-LIFE MPC LOGO';

            h = document.createElement('DIV'); //CREATING ELEMENT FOR UPDATE MSG
            h.className = 'card-body mpc-card-body';

            j = document.createElement('H1');
            j.textContent = 'JUSTICE UYO MPCS WEBSITE IN MAINTENANCE MODE!';
            j.className = 'text-center';

            k = document.createElement('P');
            k.textContent = 'We are running maintenance check on our website, and this might take up to five (5) minute or more, please try again after five minutes.';
            l = document.createElement('P');
            l.textContent = 'Maintenance and system update is importance, it help us fix bugs, system vulnerability, and to serves you better. We are very sorry for any inconveniences this might have cause you.';

            m = document.createElement('P');
            m.textContent = 'JUSTICE UYO MPCS';

            //creating maintenance done p
            n = document.createElement('P'); // maintenance done return to user
            n.className = 'mpc-maintenance-done';
            
            e.appendChild(logo); // insert child element of e variable

            h.appendChild(j) //first child element of h variable
            h.appendChild(k) //first child element of h variable
            h.appendChild(l) //second child element of h variable
            h.appendChild(m) //third child element of h variable
          //  h.appendChild(j) //first child element of h variable
            
            d.appendChild(e); //appending child element of e
            d.appendChild(h); //appending child element of d
            d.appendChild(n); //appending child element of d
            

            f = document.body;
            f.classList.add('mpc-update');
            f.appendChild(d);

            //LET LOOP OVER ALL TO HIDE
            for (let i = 0; i < c.length; i++) {
                c[i].style.display = 'none';
                c[i].style.visibility = 'hidden';
                
            }
           

            __mpc_m_finish();
        }

        
}

    //__mpc_time();

    //creating mpc maintenance fini function
function __mpc_m_finish() {
    var mtnRtn, a, b, c, d, e, cnt, countdown, x, now, distance, days, hours, minutes, seconds;

        mtnRtn = document.querySelector('.mpc-maintenance-done'); //maintenance mode rtn

       //  countdown = new Date("feb 29, 2023 00:00:00").getTime();
    x = setInterval(function () {
       //  now = new Date().getTime();
       //  distance = countdown - now;
        //var check = $('.checker');
   /*     
         days = Math.floor(distance /(1000 * 60 * 60 * 24));
         hours = Math.floor((distance %(1000 * 60 * 60 * 24))/ (1000 * 60 * 60));
         minutes = Math.floor((distance %(1000 * 60 * 60))/ (1000 * 60));
         seconds = Math.floor((distance %(1000 * 60 ))/ 1000);
        */
        countdown = new Date(2023, 1, 29, 20, 5);
        now = new Date().getMinutes();

        distance = countdown - now;
        

        minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000  * 60));
        seconds = Math.floor((distance %(1000 * 60)) / 1000);

 
       // a = days + ' days ' + hours + ' hours ' + minutes + ' minute ' + seconds + ' seconds';
       a =  minutes + ' Minutes ' + seconds + ' seconds';

       // mtnRtn.innerHTML = a;

        if(distance < 0) {
            clearInterval(x) ;
          //  $('#dys').html('00');
          //  $('#hrs').html('00');
          //  $('#min').html('00');
           // $('#sec').html('00');
           // check.html('completed')

        }
        
        }, 1000);
}

function __mpcLoginButton() {
    var a, b, c, d, e, f, g, toUrl, xhr;

        a = document.querySelector('.UidUser-login');
        b = document.querySelector('.user-uid'); //userlogin username
        c = document.querySelector('.user-uidPass'); // userlogin password
        rtn = document.querySelector('.rtn-txt'); // rtn any error message or success message here
     //   a.addEventListener('click', function() {
            

            //trying to sanitize input

            if(b.value == '') {
                rtn.classList.remove('rtn-msg-succ');
                rtn.classList.add('rtn-msg-err');
                rtn.innerHTML = 'Username is required, Please input username!';
                
                a.disabled = false;
                a.style.background= '#ffffff';
                a.style.color= 'rgb(226, 145, 24)';
                a.textContent = 'Login';
                setTimeout(function(){
                    __mpcTurnOffMsg();
                }, 4000)
            }else if(c.value == '') {
                rtn.classList.remove('rtn-msg-succ');
                rtn.classList.add('rtn-msg-err');
                rtn.innerHTML = 'Password is required, Please input password!';
                
                a.disabled = false;
                a.style.background= '#ffffff';
                a.style.color= 'rgb(226, 145, 24)';
                a.textContent = 'Login';
                setTimeout(function(){
                    __mpcTurnOffMsg();
                }, 4000)
            }else if(c.value.length < 8) {
                rtn.classList.remove('rtn-msg-succ');
                rtn.classList.add('rtn-msg-err');
                rtn.innerHTML = 'Password is too short, try again!';
                
                a.disabled = false;
                a.style.background= '#ffffff';
                a.style.color= 'rgb(226, 145, 24)';
                a.textContent = 'Login';
                setTimeout(function(){
                    __mpcTurnOffMsg();
                }, 4000)
            }else {
                rtn.classList.remove('rtn-msg-err');
                rtn.classList.add('rtn-msg-succ');
               // rtn.innerHTML = 'success!';
                
                
                a.style.background= 'gray';
                a.textContent = 'Please Wait...';
                a.disabled = false;
                a.style.color= 'rgb(226, 145, 24)';
                a.disabled = true;

                //load animation
                __mpcShowAnimation__(); //mpc animation loader is here
                //url for ajax request
                toUrl = __mpcFile_path() + 'functions/mpc-dataRtn.php';

                d = "PERMIT=GOODMPC&Usr=" + b.value + '&Pwdpass=' + c.value;
               // d = "PERM=EMPurl";
               
                xhr = new XMLHttpRequest();
					url = toUrl;
					xhr.open('POST', url, true);
					xhr.onreadystatechange = function(){
						if(this.readyState == 4 && this.status == 200){
							
							if(this.responseText == 'LOGIN SUCCESS'){
                                //if admin login success then first do this
                                __mpcAnimaitonOff__(); //turn of animation

                                rtn.innerHTML = 'Login successful, System redirecting...';

                                setTimeout(function(){
                                    __mpcTurnOffMsg();
                                },4000) //the success message disappear after 4000 milliseconds

                                setTimeout(function(){
                                    window.location.href = __mpcFile_path() + 'user/dashboard.php/?action=dashboard';
                                },5000) //REDIRECTING TO A NEW PAGE START after 5000 milliseconds
                            }else {
                                //turn off animation and return response to admin
                                __mpcAnimaitonOff__(); //turn of animation
                                rtn.classList.remove('rtn-msg-succ');
                                rtn.classList.add('rtn-msg-err');
                                
                                rtn.innerHTML = this.response;

                                setTimeout(function(){
                                    __mpcTurnOffMsg();
                                }, 6000)

                                a.disabled = false; //trying to enable login button
                                a.textContent = 'Login';
                                a.style.background = '#ffffff';
                            }
								
						}
					}
					xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
					xhr.send(d);


            /*    $.ajax({
                    url: toUrl,
                    method:'POST',
                    data:{
                        Usr: b,
                        Pwdpass: c,
                        PERMIT:'GOOD-LIFE@ ADMIN',
                    }, success:function(response, status) {
                        //first once admin login is successful
                        if(response === 'LOGIN SUCCESS') {
                            //if admin login success then first do this
                            __mpcAnimaitonOff__(); //turn of animation

                            rtn.innerHTML = 'Login successful, System redirecting...';

                            setTimeout(function(){
                                __mpcTurnOffMsg();
                            },4000) //the success message disappear after 4000 milliseconds


                            

                            setTimeout(function(){
                                window.location.href = __mpcFile_path() + 'dashboard.php/action=dashboard';
                            },5000) //REDIRECTING TO A NEW PAGE START after 5000 milliseconds
                        }else {
                            __mpcAnimaitonOff__(); //turn of animation
                            rtn.classList.remove('rtn-msg-succ');
                            rtn.classList.add('rtn-msg-err');
                            
                            rtn.innerHTML = response;

                            setTimeout(function(){
                                __mpcTurnOffMsg();
                            }, 6000)
                        }
                    }
                })
                */


            }

      //  })
}

//UiduserRegister() register
function UiduserRegister(){
    var a, b, c, d, e, f, g, h, url, butt;

        //trying to colloct all the input
        a = document.querySelector('.fn').value; //user fn
        b = document.querySelector('.ln').value; //user fn
        c = document.querySelector('.usrPhEm').value; //user phone, email, username
        d = document.querySelector('.pwd').value; //user password cnfm-pwd
        h = document.querySelector('.cnfm-pwd').value; //user confirm password cnfm-pwd
        e = document.querySelector('.sqSelect').value; //user security quesstion
        f = document.querySelector('.Sqans').value; //user security answer
        g = document.querySelector('.rtn-txt');
        butt = document.querySelector('.UidUser-reg');

        if(a === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'First name is required, please fill it!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(b === ''){
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Last name is required, please fill it!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(c === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Username, phone, Email is required, Provide any of it to gain access!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(d === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Password is required, You need this to login to dashboard!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(h !== d) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Password not match, try again!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(h === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Retype password!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(e === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Security question is required, We need this to verify if it really you!';
            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(f === '') {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Security answer is required, please answer  question';
            document.querySelector('.sqSelect').style.border = '2px solid red';
            document.querySelector('.Sqans').style.borderBottom = '2px solid red';
            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(a.length < 4) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'First name is too short!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(b.length < 4) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Last name is too short!';

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 4000)
        }else if(c.search(/[!#$%^&)*(_}{';,+-.><":|]/) != -1) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Invalid character found in username,  ' + c;

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 6000)
        }else if(a.search(/[!#$%^&)*(_}{';,+-.><":|]/) != -1) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Firstname contains an invalid character, ' + a;

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 6000)
        }else if(b.search(/[!#$%^&)*(_}{';,+-.><":|]/) != -1) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Lastname contains an invalid character,   ' + b;

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 6000)
        }else if(f.search(/[!#$%^&)*(_}{';,+-.><":|]/) != -1) {
            g.classList.remove('rtn-msg-succ');
            g.classList.add('rtn-msg-err');

            g.innerHTML = 'Invalid security Answer,   ' + f;

            setTimeout(function(){
                __mpcTurnOffMsg();
            }, 6000)
        }else {
            g.classList.remove('rtn-msg-err');
            g.classList.add('rtn-msg-succ')
            document.querySelector('.sqSelect').style.border = '1px solid #ffffff';
            document.querySelector('.Sqans').style.borderBottom = '2px solid #ffffff';

           // g.innerHTML = 'Everything is ok';
           url = __mpcFile_path() + 'functions/mpc-dataRtn.php';

           //disable button
           //butt.disabled = true;
          // butt.textContent = 'Please Wait...';

            __mpcShowAnimation__();

           $.ajax({
                url:url,
                method:'POST',
                data:{
                    FN:a,
                    LN:b,
                    USER:c,
                    PWD:d,
                    SQ:e,
                    SQans:f,
                    MPCP:'MPCADMIN_perm',
                }, success:function(response, status){
                    //calling and show animation here
          // __mpcShowAnimation__();
                    //alert(response);
                   // alert(status);
                   if(response === 'successful'){
                    __mpcAnimaitonOff__(); //try to turn off the animation whern user registration is successful
                        g.innerHTML = 'Registration successful, System Redirecting...';

                        //try to redirect user to login, while succefful registration
                        window.location.href = __mpcFile_path() + 'user/index/?action=loginSuccess';
                   }else {
                    
                    g.innerHTML = response;
                    console.log('GOOD LIFE MPC ADMIN REGISTER STATUS ' + status);
                    console.log('GOOD LIFE MPC ADMIN RESPONSE ' + response);
                    __mpcAnimaitonOff__(); //try to turn off the animation whern user registration is successful
                   }  
                }
           })

           /**
            * $.ajax({
			url:'emp-functions/emp-go.php',
			method:'POST',
			data:{
				structure:a,
				PERM:'SirWilker',
				Emp:'DavidSunday',
				Id:b
			},success:function(response, status) {
					d.style.visibility='visible';
					d.style.display='block';
					d.style.zIndex='10000';
					d.style.width='100%';
					d.style.height='100vh';
					d.style.background='rgba(0, 0, 0, 0.3)';
					e.style.overflowY='hidden';
					
					if(response == 1) {
						c.innerHTML = 'Your current edit Saved successfully!';
					}else {
						c.innerHTML= rtn;
					}
					
			}
		})
            */
        }



}
//function to turn off err msg
function __mpcTurnOffMsg() {
    var a, b ;
        a = document.querySelector('.rtn-txt');
        

    //remvoe text inside this tag
        a.innerText = '';
        a.classList.remove('rtn-msg-err') //removing css classList of rtn-txt success
        a.classList.remove('rtn-msg-succ') //removing css classList of rtn-txt error
}
window.onload = function() {

    //live time inside login page
    setInterval(function(){
        __mpc_time();
    }, 1000)
    
   // __mpcLoginButton(); //trying to call this button when document is fully loaded
   //__mpcShowAnimation__();

    __mpc_m_finish() // system update

    __mpc_mainenance__();

}

